(this.webpackJsonpxibit=this.webpackJsonpxibit||[]).push([[0],{186:function(e,t,a){},199:function(e,t,a){e.exports=a(423)},204:function(e,t,a){},405:function(e,t,a){},423:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(12),c=a.n(l),o=(a(204),a(32)),i=a(31),s=a(34),u=Object(n.createContext)(),m=a(29),p=a.n(m),d=a(41),E=a(42),b=a.n(E),h=a(107),g=a.n(h),f=a(50),y=a.n(f),O=a(63),v=a.n(O),x=a(68),S=a.n(x),k=Object(n.forwardRef)((function(e,t){var a=e.onSubmit;e.error;return r.a.createElement("div",{ref:t,className:"formComponent"},r.a.createElement(g.a,{className:"titleComponent",style:{color:"#FEA000"}},"Log In"),r.a.createElement(y.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:a},r.a.createElement(y.a.Item,{name:"email",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(v.a,{placeholder:"Username",style:{padding:"10px"}})),r.a.createElement(y.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(v.a,{type:"password",placeholder:"Password",style:{padding:"10px"}})),r.a.createElement(y.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"80%",backgroundColor:"#669900",border:"#669900",height:"50px",fontSize:"1.5rem"}},"Submit"),r.a.createElement(i.c,{to:"/register",style:{width:"80%",height:"50px",display:"block",textAlign:"center",margin:"0 auto",fontSize:"1.2rem"}},"Don't have an account? Register"))))})),j=a(69),C=a.n(j),w=a(55),_=a.n(w),P=a(110),N=a.n(P),T=(a(186),Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).Url||"http://localhost:3001"),I=function(){var e=Object(s.g)(),t=Object(n.useContext)(u).setUser,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=(l[0],l[1]),i=function(){var a=Object(d.a)(p.a.mark((function a(n){var r,l,o,i,s,u;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.email,l=n.password,a.prev=1,a.next=4,b.a.post("".concat(T,"/auth/login"),{email:r,password:l});case 4:o=a.sent,i=o.data,s=i.token,u={email:r,token:s},localStorage.setItem("user",JSON.stringify(u)),t({email:r,token:s}),e.replace("/"),a.next=16;break;case 13:a.prev=13,a.t0=a.catch(1),c(a.t0.message);case 16:case"end":return a.stop()}}),a,null,[[1,13]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(C.a,{style:{height:"100vh"}},r.a.createElement(_.a,{className:"gutter-row display",span:12,style:{backgroundColor:"#FEA000"}}),r.a.createElement(_.a,{className:" gutter-row ",span:12},r.a.createElement(k,{onSubmit:i,error:c})))))},D=Object(n.createContext)(),A=(a(405),a(40)),U=a.n(A),R=a(88),L=a.n(R),z=a(432),K=a(115),W=function(){var e=Object(n.useContext)(u),t=e.user,a=e.setUser,l=Object(n.useContext)(D),c=l.plans,o=l.setPlans,s=l.selectedPlan,m=l.setSelectedPlan,E=Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL||"http://localhost:3001",h=function(){var e=Object(d.a)(p.a.mark((function e(){var a,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(E,"/api/plans"),{headers:{authorization:"Bearer ".concat(t.token)}});case 2:a=e.sent,n=a.data,o(n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h()}),[h]);var g=r.a.createElement(U.a,null,c.length?c.map((function(e,t){return r.a.createElement(U.a.Item,{key:t,onClick:function(){m(e)}},e.title)})):r.a.createElement(U.a.Item,null,'"No Plans"'));return r.a.createElement(U.a,{theme:"dark",mode:"horizontal"},r.a.createElement(U.a.Item,{key:"app"},r.a.createElement(i.c,{to:"/"},"Xibit")),r.a.createElement(U.a.Item,{key:"dashboard"},r.a.createElement(i.c,{to:"/xibits"},"Dashboard")),r.a.createElement(U.a.Item,{key:"plans"},r.a.createElement(i.c,{to:"/xibits/plans"},"Plans")),r.a.createElement(U.a.Item,{key:"search"},r.a.createElement(i.c,{to:"/xibits/search"},"Search")),r.a.createElement(U.a.Item,{key:"add-plan"},r.a.createElement(L.a,{placeholder:"Add a plan",enterButton:"Add",size:"large",onSearch:function(){var e=Object(d.a)(p.a.mark((function e(a){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.post("".concat(E,"/api/plans"),{title:a,createdAt:Date.now()},{headers:{authorization:"Bearer ".concat(t.token)}});case 2:n=h(),o(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})),r.a.createElement(U.a.Item,null,r.a.createElement("label",null,"Selected plan: "),r.a.createElement(z.a,{overlay:g,placement:"bottomCenter",arrow:!0},r.a.createElement(K.a,null,s?s.title:"None"))),r.a.createElement(U.a.Item,{key:"logout",style:{float:"right"},onClick:function(){return a({})}},"Logout"))},F=a(85),q=a(53),B=a(430),H=a(66),V=a.n(H),X=function(){var e=Object(n.useContext)(D).selectedPlan,t=Object(n.useState)([]),a=Object(o.a)(t,2),l=(a[0],a[1]);return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement("div",{className:"site-card-wrapper",style:{width:"80%",display:"block",margin:"20px auto 0 auto"}}),r.a.createElement("div",{className:"site-card-wrapper container"},r.a.createElement(F.a,{style:{width:"70%",display:"block",margin:"10px auto"}},e?r.a.createElement(K.a,{style:{width:"100%",display:"block",margin:"10px auto"},type:"primary",danger:!0,size:"large"},"Submit"):null,r.a.createElement(q.a,null,e?e.xibits.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(B.a,{title:e.name,style:{margin:"10px auto",border:"2px solid #FEA000"},bordered:!0},r.a.createElement("p",null,e.address),r.a.createElement("label",null,"Type in Order"),r.a.createElement(V.a,{onChange:function(t){var a=t.target;l({id:e._id,index:a.value})}})))})):r.a.createElement("h2",{style:{textAlign:"center"}},"Please select a plan")))))},J=function(){return Object(n.useContext)(u).user.token?r.a.createElement(W,null):r.a.createElement(U.a,{theme:"dark",mode:"horizontal"},r.a.createElement(U.a.Item,{key:"app"},r.a.createElement(i.c,{to:"/"},r.a.createElement("img",{className:"ant-menu-item",alt:"logo"}))),r.a.createElement(U.a.Item,{key:"login",style:{float:"right"}},r.a.createElement(i.c,{to:"/login"},"Login")))},M=a(195),G=a.n(M),Q=a(106),Y=a.n(Q),Z=Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).Url||"http://localhost:3001/api",$=function(e){var t=e.cardId,a=e.cardTitle,l=e.cardContent,c=(e.photoRef,Object(n.useContext)(D).selectedPlan),i=Object(n.useContext)(u).user,s=Object(n.useState)(),m=Object(o.a)(s,2),E=m[0],h=m[1],g=function(){var e=Object(d.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={placeId:t,name:a,address:l,createdAt:Date.now()},e.next=3,b.a.put("".concat(Z,"/plans/").concat(c._id),n,{headers:{authorization:"Bearer ".concat(i.token)}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"site-card-wrapper"},r.a.createElement(C.a,{style:{width:"70%",display:"block",margin:"10px auto"}},r.a.createElement(_.a,null,r.a.createElement(G.a,{title:a,style:{margin:"10px auto",border:"2px solid #FEA000"},bordered:!0},l),c?r.a.createElement(K.a,{onClick:g,type:"primary",size:"large"},"Add to Plan"):r.a.createElement(K.a,{type:"primary",size:"large"},"Please Select A Plan to Add"),r.a.createElement(K.a,{onClick:function(){h(!0)},type:"primary",danger:!0,size:"large",style:{float:"right"}},"View")),r.a.createElement(Y.a,{title:a,visible:E,onOk:function(){h(!1)},onCancel:function(){h(!1)}},r.a.createElement("p",null,l),r.a.createElement("p",null,a))))},ee=Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL||"http://localhost:3001/api",te=function(){var e=Object(n.useContext)(u).user,t=Object(n.useContext)(D).selectedXibit,a=Object(n.useState)([]),l=Object(o.a)(a,2),c=l[0],i=l[1];Object(n.useEffect)((function(){(function(){var a=Object(d.a)(p.a.mark((function a(){var n,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.a.get("".concat(ee,"/xibits/").concat(t,"s"),{headers:{authorization:"Bearer ".concat(e.token)}});case 2:n=a.sent,r=n.data,i(r.queryResults);case 5:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()()}),[t,e.token]);return r.a.createElement("div",null,r.a.createElement(J,null),c?c.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement($,{cardTitle:e.name,cardContent:e.address,cardId:e.id,cardIndex:t,photoRef:e.photos[0].photo_reference}))})):r.a.createElement("p",null,"Loading..."))},ae=a(431),ne=function(e){var t=e.header,a=(Object(n.useContext)(u).user,Object(n.useContext)(D).setSelectXibit);return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"inline-block",width:"100%",margin:"0 auto",left:"20px"}},r.a.createElement(K.a,{type:"primary",style:{margin:"10px 10px 0 0",display:"block",float:"right",backgroundColor:"#449D44",border:"#449D44"}},r.a.createElement(i.b,{to:"/register"},"Sign Up")),r.a.createElement(K.a,{type:"primary",style:{margin:"10px 10px 0 0",display:"block",float:"right",backgroundColor:"#669900",border:"#669900"}},r.a.createElement(i.b,{to:"/login"},"Sign In"))),r.a.createElement("div",{style:{margin:"0 auto"},className:"rightComponent"},r.a.createElement("h1",{style:{textAlign:"center",fontSize:"7rem",color:"#FEA000"}},t),r.a.createElement(K.a,{type:"primary",style:{margin:"10px auto",display:"block",width:"80%",height:"150px",backgroundColor:"#1F4366",fontSize:"2.5rem",border:"#1F4366"},onClick:function(){a("aquarium")}},r.a.createElement(i.b,{to:"/xibits/aquarium"},"Aquariums")),r.a.createElement(K.a,{type:"primary",style:{margin:"0 auto",display:"block",width:"80%",height:"150px",backgroundColor:"#FEA000",border:"#FEA000",fontSize:"2.5rem"},onClick:function(){a("safari")}},r.a.createElement(i.b,{to:"/xibits/safari"},"Safaris"))))},re=function(){return r.a.createElement("div",null,r.a.createElement(ae.a,null,r.a.createElement(F.a,{style:{height:"100vh"}},r.a.createElement(q.a,{className:"leftContainer gutter-row",span:12,style:{backgroundColor:"#1F4366"}}),r.a.createElement(q.a,{className:"rightComponent gutter-row ",span:12},r.a.createElement(ne,{header:"Xibit"})))))},le=Object(n.forwardRef)((function(e,t){var a=e.onSubmit;e.error;return r.a.createElement("div",{ref:t,className:"formComponent"},r.a.createElement(g.a,{className:"titleComponent",style:{color:"#FEA000"}},"Register"),r.a.createElement(y.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:a},r.a.createElement(y.a.Item,{name:"firstName",rules:[{required:!0,message:"Please input your Firstname!"}]},r.a.createElement(v.a,{placeholder:"First Name",style:{padding:"10px"}})),r.a.createElement(y.a.Item,{name:"lastName",rules:[{required:!0,message:"Please input your Lastname!"}]},r.a.createElement(v.a,{placeholder:"Last Name",style:{padding:"10px"}})),r.a.createElement(y.a.Item,{name:"email",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(v.a,{placeholder:"Username",style:{padding:"10px"}})),r.a.createElement(y.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(v.a,{type:"password",placeholder:"Password",style:{padding:"10px"}})),r.a.createElement(y.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"submit",className:"login-form-button",style:{width:"80%",backgroundColor:"#669900",border:"#669900",height:"50px",fontSize:"1.5rem"}},"Submit"),r.a.createElement(i.c,{to:"/login",style:{width:"80%",height:"50px",display:"block",textAlign:"center",margin:"0 auto",fontSize:"1.2rem"}},"Already have an account? Sign in"))))})),ce=Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).Url||"http://localhost:3001",oe=function(){var e=Object(s.g)(),t=Object(n.useContext)(u).setUser,a=Object(n.useState)(""),l=Object(o.a)(a,2),c=(l[0],l[1]),i=function(){var a=Object(d.a)(p.a.mark((function a(n){var r,l,o,i,s,u,m;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=n.email,l=n.firstName,o=n.lastName,i=n.password,a.prev=1,a.next=4,b.a.post("".concat(ce,"/auth/register"),{email:r,firstName:l,lastName:o,password:i});case 4:s=a.sent,u=s.data,m=u.token,t({email:r,token:m}),e.replace("/login"),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(1),c(a.t0.message);case 14:case"end":return a.stop()}}),a,null,[[1,11]])})));return function(e){return a.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(N.a,null,r.a.createElement(C.a,{style:{height:"100vh"}},r.a.createElement(_.a,{className:"gutter-row display",span:12,style:{backgroundColor:"#FEA000"}}),r.a.createElement(_.a,{className:"rightComponent gutter-row ",span:12},r.a.createElement(le,{onSubmit:i,error:c})))))},ie=a(429);function se(e){var t=e.onMount,a=e.className,l=e.onMountProps,c=e.lat,i=e.lng,s=Object(n.useRef)(),u=Object(n.useState)(),m=Object(o.a)(u,2),p=m[0],d=m[1],E=Object(n.useContext)(D).apiKey;return Object(n.useEffect)((function(){var e=function(){return d(new window.google.maps.Map(s.current,{center:{lat:c,lng:i},zoom:15}))};if(!window.google){var t=document.createElement("script");return t.src="https://maps.googleapis.com/maps/api/js?key=".concat(E),document.head.append(t),t.addEventListener("load",e),function(){return t.removeEventListener("load",e)}}e()}),[c,i,E]),p&&"function"===typeof t&&t(p,l),r.a.createElement("div",Object.assign({style:{height:"60vh",margin:"1em 0",borderRadius:"0.5em"}},{ref:s,className:a}))}var ue=function(e){var t=e.lat,a=e.lng,n=e.data.data.candidates[0];return r.a.createElement("div",{className:"site-card-border-less-wrapper"},r.a.createElement(B.a,{title:n.name,bordered:!1,style:{width:300}},r.a.createElement("p",null,n.opening_hours.open_now?r.a.createElement("p",{style:{color:"#449D44"}},"It is open now"):r.a.createElement("p",{style:{color:"#8f0808"}},"It isn't open right now")),r.a.createElement("p",null,n.formatted_address),r.a.createElement("p",null,n.rating)),r.a.createElement(se,{lat:t,lng:a}))},me=Object({NODE_ENV:"production",PUBLIC_URL:"/xibit",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL||"http://localhost:3001/api",pe=function(){var e=Object(n.useState)("safari"),t=Object(o.a)(e,2),a=t[0],l=t[1],c=Object(n.useContext)(u).user,i=Object(n.useState)(),s=Object(o.a)(i,2),m=s[0],E=s[1],h=Object(n.useState)(!1),g=Object(o.a)(h,2),f=g[0],y=g[1],O=Object(n.useContext)(D).setApiKey;Object(n.useEffect)((function(){(function(){var e=Object(d.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(me,"/key"),{headers:{authorization:"Bearer ".concat(c.token)}});case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[O,c.token]);return r.a.createElement("div",null,r.a.createElement(W,null),r.a.createElement("div",{className:"container",style:{width:"80%",display:"block",margin:"20px auto 0 auto"}},r.a.createElement(ie.a.Group,{options:[{label:"Search Safaris",value:"safari"},{label:"Search Aquariums",value:"aquarium"},{label:"Search by Postcode",value:"postcode"}],onChange:function(e){var t=e.target;l(t.value)},value:a,optionType:"button",buttonStyle:"solid"}),r.a.createElement(L.a,{placeholder:"Search",enterButton:"Search",size:"large",onSearch:function(){var e=Object(d.a)(p.a.mark((function e(t){var n,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(me,"/xibit/").concat(a,"/search/").concat(t),{headers:{authorization:"Bearer ".concat(c.token)}});case 2:n=e.sent,r=n.data,E(r),y(!0);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),f?r.a.createElement(ue,{lat:m.lat,lng:m.lng,data:m}):r.a.createElement("p",null,"Please select search and type in query")))},de=function(){var e=Object(n.useContext)(u).user;return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/",exact:!0},r.a.createElement(re,null)),r.a.createElement(s.b,{path:"/login",exact:!0},r.a.createElement(I,null)),r.a.createElement(s.b,{path:"/register",exact:!0},r.a.createElement(oe,null)),r.a.createElement(s.b,{path:"/xibits",exact:!0},e.token?r.a.createElement(re,null):r.a.createElement(s.a,{to:"/login"})),r.a.createElement(s.b,{path:"/xibits/aquarium",exact:!0},e.token?r.a.createElement(te,null):r.a.createElement(s.a,{to:"/login"})),r.a.createElement(s.b,{path:"/xibits/safari",exact:!0},e.token?r.a.createElement(te,null):r.a.createElement(s.a,{to:"/login"})),r.a.createElement(s.b,{path:"/xibits/plans",exact:!0},e.token?r.a.createElement(X,null):r.a.createElement(s.a,{to:"/login"})),r.a.createElement(s.b,{path:"/xibits/search",exact:!0},e.token?r.a.createElement(pe,null):r.a.createElement(s.a,{to:"/login"})))))},Ee=function(){var e=localStorage.getItem("user"),t=JSON.parse(e),a=Object(n.useState)(t||{}),l=Object(o.a)(a,2),c=l[0],s=l[1],m=Object(n.useState)("aquariums"),p=Object(o.a)(m,2),d=p[0],E=p[1],b=Object(n.useState)([]),h=Object(o.a)(b,2),g=h[0],f=h[1],y=Object(n.useState)(),O=Object(o.a)(y,2),v=O[0],x=O[1],S=Object(n.useState)(),k=Object(o.a)(S,2),j=k[0],C=k[1],w=Object(n.useState)(),_=Object(o.a)(w,2),P=_[0],N=_[1];return r.a.createElement(i.a,null,r.a.createElement(u.Provider,{value:{user:c,setUser:s}},r.a.createElement(D.Provider,{value:{selectedXibit:d,setSelectXibit:E,plans:g,setPlans:f,selectedPlan:v,setSelectedPlan:x,planData:j,sePlanData:C,apiKey:P,setApiKey:N}},r.a.createElement(de,null))))};a(422);c.a.render(r.a.createElement(Ee,null),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.32f6c02d.chunk.js.map